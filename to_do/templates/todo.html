{% extends "base.html" %}
{% load static %}
{% block title %}TODO Page{% endblock title %}

{% block main-content %}
<div style="display: flex; justify-content: center; align-items: center; ">
    <div>
        {% for i in data %}
        <h2 style="text-transform: uppercase;">Logedin as <span style="color: red;">{{i.username}}</span></h2>
        {% endfor %}
    </div>
    <div>
        <button><a href="{% url 'logout' %}">LogOut</a></button>
    </div>

</div>


<h2>Add a New Task</h2>
<form action="{% url 'add_todo' %}" method="post">
  {% csrf_token %}
  <table>
    <tr>
        <td>Task Title:</td>
        <td><input type="text" name="title" ></td>
    </tr>
    <tr>
        <td>Description:</td>
        <td><input type="text" name="description"></td>
    </tr>
  </table>
  <button type="submit">Add Task</button>
</form>



<h2>Your Tasks</h2>

{% if todos %}
  <ul>
    {% for todo in todos %}
      <li>
        <strong>{{ todo.title }}</strong> - {{ todo.description }}
        {% if todo.completed %}
           <span style="color: green; font-size: large;">DONE</span>
        {% else %}
          <form action="{% url 'mark_done' todo.id %}" method="post" style="display: inline;">
            {% csrf_token %}
            <button type="submit">Mark as Done</button>
          </form>
        {% endif %}

        <form action="{% url 'update_todo' todo.id %}" method="get" style="display:inline;">
          <button type="submit">Edit</button>
        </form>

        <form action="{% url 'delete_todo' todo.id %}" method="post" style="display: inline;">
          {% csrf_token %}
          <button type="submit">Delete</button>
        </form>
      </li>
    {% endfor %}
  </ul>
{% else %}
<ul>
  <li>No tasks yet.</li>
</ul>
{% endif %}

{% endblock main-content %}